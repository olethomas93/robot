var five = require("../lib/johnny-five.js");
var board = new five.Board();

board.on("ready", function() {

  var en = 79;
  var pwm = 10;
  var dir = 78;

  var expander = new five.Expander({
    controller: "MCP23017"
  });

  expander.pinMode(en, this.MODES.OUTPUT);
  expander.pinMode(pwm, this.MODES.OUTPUT);
  expander.pinMode(dir, this.MODES.OUTPUT);


  expander.digitalWrite(dir, this.MODES.LOW);
  expander.analogWrite(pwm, 255);
  expander.digitalWrite(en, this.MODES.HIGH);


  setTimeout(function() {

    expander.digitalWrite(en, this.MODES.LOW);
    expander.analogWrite(pwm, 0);
    expander.digitalWrite(dir, this.MODES.LOW);

    setTimeout(function() {

      expander.digitalWrite(dir, this.MODES.LOW);
      expander.analogWrite(pwm, 255);
      expander.digitalWrite(en, this.MODES.HIGH);
    }.bind(this), 2000);

  }.bind(this), 2000);

});
